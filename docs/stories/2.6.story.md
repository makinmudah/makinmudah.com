# Story 2.6: Shared Navigation and Cross-Page Components

## Status

Done

## Story

**As a** user navigating between landing and catalogue pages
**I want** consistent navigation and visual continuity
**So that** I understand I'm still on the Makin Mudah site and can easily move between sections

## Acceptance Criteria

1. Shared header component created containing: Makin Mudah logo (links to `/`), navigation menu
2. Header displays on all pages: landing, applications catalogue, mentoring catalogue
3. Navigation menu includes links: "Beranda" (home), "Aplikasi", "Mentoring", with active state highlighting
4. Header is sticky on desktop (fixed position on scroll), static on mobile to save screen space
5. Logo uses SVG format or text, teal color (#14B8A6), includes alt text "Makin Mudah"
6. Shared footer component enhanced with: Copyright text, future links placeholders (Tentang Kami, Kontak, Kebijakan Privasi)
7. Footer displays consistently across all pages with same styling
8. Breadcrumb component created for catalogue pages showing user path: Home > Katalog
9. Breadcrumbs improve navigation and SEO (schema.org BreadcrumbList structured data already implemented in Story 2.4)
10. "Back to Home" link or breadcrumb prominently displayed on catalogue pages for easy navigation
11. Smooth page transitions implemented using Nuxt page transitions (fade effect, 200ms duration)
12. Mobile menu (hamburger) implemented for navigation links on screens <768px width
13. All navigation elements meet WCAG 2.1 AA: sufficient color contrast, keyboard accessible, focus indicators visible

## Tasks / Subtasks

### Header Component Creation

- [ ] **Create AppHeader.vue Component**
  - [ ] Logo/brand name (links to `/`)
  - [ ] Navigation menu with links: Beranda, Aplikasi, Mentoring
  - [ ] Active state highlighting for current page
  - [ ] Responsive design (mobile-friendly)
  - [ ] Accessibility features (ARIA labels, keyboard navigation)

### Sticky Header Implementation

- [ ] **Desktop Sticky Header**
  - [ ] Fixed position on scroll (desktop/tablet)
  - [ ] Smooth scroll behavior
  - [ ] Shadow on scroll for depth
- [ ] **Mobile Static Header**
  - [ ] Static position on mobile to save screen space
  - [ ] No sticky behavior <768px

### Mobile Menu Implementation

- [ ] **Hamburger Menu**
  - [ ] Hamburger icon (3 lines) on mobile <768px
  - [ ] Toggle open/close functionality
  - [ ] Slide-in or dropdown menu
  - [ ] Close on link click
  - [ ] Close on outside click
  - [ ] Keyboard accessible (Escape to close)
  - [ ] Focus trap when open

### Footer Enhancement

- [ ] **Enhance AppFooter Component**
  - [ ] Keep existing copyright
  - [ ] Add placeholder links: Tentang Kami, Kontak, Kebijakan Privasi
  - [ ] Styled consistently
  - [ ] Links currently point to `#` (placeholders for future)

### Breadcrumb Component

- [ ] **Create AppBreadcrumb.vue Component**
  - [ ] Dynamic breadcrumb based on route
  - [ ] Home > Katalog structure
  - [ ] Link to home
  - [ ] Current page not linked
  - [ ] Semantic HTML (nav, aria-label)
  - [ ] Schema.org BreadcrumbList (already in page, breadcrumb for UI only)

### Page Integration

- [ ] **Update Landing Page (index.vue)**
  - [ ] Add AppHeader at top
  - [ ] Keep all existing sections
  - [ ] Verify layout and spacing
- [ ] **Update Katalog Page (katalog.vue)**
  - [ ] Replace inline header with AppHeader
  - [ ] Add AppBreadcrumb component
  - [ ] Verify responsive design

### Page Transitions

- [ ] **Implement Nuxt Page Transitions**
  - [ ] Configure in nuxt.config.ts or app.vue
  - [ ] Fade effect (200ms duration)
  - [ ] Test transitions between pages

### Accessibility & Testing

- [ ] **Accessibility Audit**
  - [ ] Color contrast meets WCAG 2.1 AA
  - [ ] Keyboard navigation works
  - [ ] Focus indicators visible
  - [ ] Screen reader friendly
  - [ ] ARIA labels where needed
- [ ] **Responsive Testing**
  - [ ] Test on mobile (320px, 375px, 414px)
  - [ ] Test on tablet (768px, 1024px)
  - [ ] Test on desktop (1280px, 1920px)
  - [ ] Hamburger menu works on mobile
  - [ ] Sticky header works on desktop
- [ ] **Navigation Testing**
  - [ ] All links work correctly
  - [ ] Active states highlight correctly
  - [ ] Breadcrumbs navigate correctly
  - [ ] Mobile menu closes properly

### Documentation

- [ ] **Update README**
  - [ ] Document navigation structure
  - [ ] Explain header/footer components
  - [ ] Note mobile menu behavior

## Dev Notes

### Previous Story Insights

From Story 2.1 (Applications Catalogue Page):

- **Katalog Page Structure**: Already has inline header with "Kembali ke Beranda" link
  - This needs to be replaced with shared AppHeader
  - Keep the breadcrumb/back navigation concept

From Story 2.4 (SEO Implementation):

- **Breadcrumb Structured Data**: Already implemented in katalog.vue
  - JSON-LD BreadcrumbList schema in place
  - UI breadcrumb component will be visual representation

[Source: docs/stories/2.1.story.md, docs/stories/2.4.story.md]

### Architecture Context

From `ui-architecture.md`:

**Component Structure:**

```
components/
├── common/
│   ├── AppHeader.vue   (NEW - to be created)
│   ├── AppFooter.vue   (EXISTS - to be enhanced)
│   └── AppBreadcrumb.vue (NEW - to be created)
├── landing/
└── catalogue/
```

**Nuxt 3 Features:**

- Auto-imports components from `components/` directory
- Components prefixed with directory name (e.g., `CommonAppHeader`)
- Page transitions via `app.vue` or `nuxt.config.ts`

[Source: docs/ui-architecture.md]

### Header Component Design

**AppHeader.vue Structure:**

```vue
<script setup lang="ts">
import { ref } from 'vue'
import { Bars3Icon, XMarkIcon } from '@heroicons/vue/24/outline'

const route = useRoute()
const mobileMenuOpen = ref(false)

function toggleMobileMenu() {
  mobileMenuOpen.value = !mobileMenuOpen.value
}

function closeMobileMenu() {
  mobileMenuOpen.value = false
}

const navLinks = [
  { label: 'Beranda', href: '/' },
  { label: 'Aplikasi', href: '/katalog#aplikasi' },
  { label: 'Mentoring', href: '/katalog#mentoring' },
]

function isActiveLink(href: string) {
  if (href === '/') {
    return route.path === '/'
  }
  return route.fullPath.includes(href)
}
</script>

<template>
  <header class="bg-white shadow-sm md:sticky md:top-0 md:z-50">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between py-4">
        <!-- Logo -->
        <NuxtLink to="/" class="text-2xl font-bold text-teal-600 hover:text-teal-700">
          Makin Mudah
        </NuxtLink>

        <!-- Desktop Navigation -->
        <nav class="hidden md:block">
          <ul class="flex space-x-8">
            <li v-for="link in navLinks" :key="link.href">
              <NuxtLink
                :to="link.href"
                :class="[
                  'transition-colors',
                  isActiveLink(link.href)
                    ? 'font-semibold text-teal-600'
                    : 'text-gray-700 hover:text-teal-600',
                ]"
              >
                {{ link.label }}
              </NuxtLink>
            </li>
          </ul>
        </nav>

        <!-- Mobile Menu Button -->
        <button class="md:hidden" @click="toggleMobileMenu" aria-label="Toggle mobile menu">
          <Bars3Icon v-if="!mobileMenuOpen" class="h-6 w-6" />
          <XMarkIcon v-else class="h-6 w-6" />
        </button>
      </div>

      <!-- Mobile Menu -->
      <nav v-if="mobileMenuOpen" class="border-t pb-4 md:hidden">
        <ul class="space-y-2 pt-4">
          <li v-for="link in navLinks" :key="link.href">
            <NuxtLink
              :to="link.href"
              @click="closeMobileMenu"
              :class="[
                'block py-2 transition-colors',
                isActiveLink(link.href)
                  ? 'font-semibold text-teal-600'
                  : 'text-gray-700 hover:text-teal-600',
              ]"
            >
              {{ link.label }}
            </NuxtLink>
          </li>
        </ul>
      </nav>
    </div>
  </header>
</template>
```

[Source: Component design patterns]

### Breadcrumb Component Design

**AppBreadcrumb.vue Structure:**

```vue
<script setup lang="ts">
import { ChevronRightIcon } from '@heroicons/vue/20/solid'

const route = useRoute()

// Simple breadcrumb logic for katalog page
const breadcrumbs = computed(() => {
  const crumbs = [{ label: 'Home', href: '/' }]

  if (route.path === '/katalog') {
    crumbs.push({ label: 'Katalog', href: null }) // Current page, no link
  }

  return crumbs
})
</script>

<template>
  <nav aria-label="Breadcrumb" class="py-4">
    <ol class="flex items-center space-x-2 text-sm">
      <li v-for="(crumb, index) in breadcrumbs" :key="crumb.label" class="flex items-center">
        <NuxtLink v-if="crumb.href" :to="crumb.href" class="text-gray-600 hover:text-teal-600">
          {{ crumb.label }}
        </NuxtLink>
        <span v-else class="text-gray-900 font-medium">
          {{ crumb.label }}
        </span>

        <ChevronRightIcon
          v-if="index < breadcrumbs.length - 1"
          class="h-4 w-4 text-gray-400 mx-2"
        />
      </li>
    </ol>
  </nav>
</template>
```

[Source: Breadcrumb UI patterns]

### Enhanced Footer Design

```vue
<template>
  <footer class="bg-gray-100 py-8">
    <div class="container mx-auto px-4">
      <!-- Footer Links -->
      <div class="mb-6 flex flex-wrap justify-center gap-6 text-sm">
        <a href="#" class="text-gray-600 hover:text-teal-600">Tentang Kami</a>
        <a href="#" class="text-gray-600 hover:text-teal-600">Kontak</a>
        <a href="#" class="text-gray-600 hover:text-teal-600">Kebijakan Privasi</a>
      </div>

      <!-- Copyright -->
      <p class="text-center text-sm text-gray-600">
        © {{ currentYear }} Makin Mudah. All rights reserved.
      </p>
    </div>
  </footer>
</template>
```

[Source: Footer design patterns]

### Page Transitions

**Configure in `app.vue`:**

```vue
<template>
  <div>
    <NuxtPage />
  </div>
</template>

<style>
.page-enter-active,
.page-leave-active {
  transition: opacity 200ms;
}

.page-enter-from,
.page-leave-to {
  opacity: 0;
}
</style>
```

Or in `nuxt.config.ts`:

```typescript
export default defineNuxtConfig({
  app: {
    pageTransition: {
      name: 'page',
      mode: 'out-in',
    },
  },
})
```

[Source: Nuxt page transitions documentation]

### Sticky Header Implementation

**CSS for Sticky Header:**

```css
/* Desktop only */
@media (min-width: 768px) {
  header {
    position: sticky;
    top: 0;
    z-index: 50;
    transition: box-shadow 0.2s;
  }

  header.scrolled {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
}
```

**With scroll detection:**

```vue
<script setup>
const isScrolled = ref(false)

onMounted(() => {
  window.addEventListener('scroll', handleScroll)
})

onUnmounted(() => {
  window.removeEventListener('scroll', handleScroll)
})

function handleScroll() {
  isScrolled.value = window.scrollY > 0
}
</script>
```

[Source: Sticky header patterns]

### Mobile Menu Best Practices

**Accessibility Features:**

1. **Keyboard Navigation**
   - Tab through menu items
   - Escape key closes menu
   - Focus trap when open

2. **ARIA Attributes**
   - `aria-label="Toggle mobile menu"` on button
   - `aria-expanded` to indicate state
   - `aria-haspopup="true"` if using dropdown

3. **Focus Management**
   - Focus first menu item when opening
   - Return focus to button when closing

[Source: WAI-ARIA authoring practices]

### Active Link Detection

**Route matching logic:**

```typescript
function isActiveLink(href: string) {
  const route = useRoute()

  // Exact match for home
  if (href === '/') {
    return route.path === '/'
  }

  // For hash links, check full path
  if (href.includes('#')) {
    return route.fullPath.includes(href)
  }

  // For other routes, check if path starts with href
  return route.path.startsWith(href)
}
```

[Source: Nuxt router documentation]

### Testing Checklist

**Functional Testing:**

- [ ] Logo links to home from all pages
- [ ] All navigation links navigate correctly
- [ ] Active state highlights correct page
- [ ] Mobile menu opens/closes correctly
- [ ] Mobile menu closes on link click
- [ ] Breadcrumbs display correctly on katalog page
- [ ] Footer displays on all pages

**Responsive Testing:**

- [ ] Header responsive on mobile (320px-767px)
- [ ] Header responsive on tablet (768px-1023px)
- [ ] Header responsive on desktop (1024px+)
- [ ] Mobile menu only appears <768px
- [ ] Sticky header only on desktop
- [ ] Footer responsive on all screen sizes

**Accessibility Testing:**

- [ ] Keyboard navigation works (Tab, Shift+Tab, Enter)
- [ ] Focus indicators visible
- [ ] Mobile menu accessible (Escape closes)
- [ ] Color contrast meets WCAG AA (4.5:1 for text)
- [ ] Screen reader announces navigation correctly
- [ ] All interactive elements have accessible names

[Source: WCAG 2.1 testing guidelines]

### Success Criteria

After Story 2.6 implementation:

**Navigation:**

- ✅ Shared header on all pages with consistent styling
- ✅ Navigation menu with Beranda, Aplikasi, Mentoring links
- ✅ Active state highlights current page
- ✅ Sticky header on desktop, static on mobile
- ✅ Mobile hamburger menu functional <768px

**Footer:**

- ✅ Enhanced footer with placeholder links
- ✅ Consistent across all pages

**Breadcrumbs:**

- ✅ Breadcrumb component on katalog page
- ✅ Shows navigation path (Home > Katalog)
- ✅ Links work correctly

**User Experience:**

- ✅ Smooth page transitions (fade, 200ms)
- ✅ Visual continuity across pages
- ✅ Easy navigation between sections

**Accessibility:**

- ✅ WCAG 2.1 AA compliant
- ✅ Keyboard accessible
- ✅ Screen reader friendly

[Source: PRD Story 2.6 acceptance criteria]

## Change Log

| Date       | Version | Description                                                        | Author                         |
| ---------- | ------- | ------------------------------------------------------------------ | ------------------------------ |
| 2026-01-23 | 1.0     | Initial story draft with comprehensive navigation component design | Claude Sonnet 4.5 (BMad Agent) |

## Dev Agent Record

### Agent Model Used

Claude Sonnet 4.5

### Implementation Notes

**Components Created:**

1. **AppHeader.vue** - Responsive navigation header with:
   - Desktop navigation with active state highlighting
   - Mobile hamburger menu (<768px)
   - Sticky positioning on desktop (md:sticky md:top-0)
   - Escape key closes mobile menu
   - Full ARIA labels and keyboard accessibility

2. **AppBreadcrumb.vue** - Dynamic breadcrumb navigation:
   - Shows "Home > Katalog" path on catalogue page
   - Uses ChevronRightIcon from Heroicons
   - Semantic HTML with aria-label
   - Current page not linked

3. **AppFooter.vue Enhancement**:
   - Added footer navigation with placeholder links
   - Tentang Kami, Kontak, Kebijakan Privasi (all point to #)
   - Updated padding from py-6 to py-8 for better spacing
   - Maintained responsive design

**Page Updates:**

- Landing page (index.vue): Added AppHeader at top
- Katalog page (katalog.vue): Replaced inline header with AppHeader, added AppBreadcrumb
- app.vue: Added page transition CSS (200ms fade effect)
- nuxt.config.ts: Configured pageTransition with out-in mode

**Accessibility Features:**

- All navigation elements keyboard accessible
- Focus indicators visible on all interactive elements
- ARIA labels on all buttons and navigation
- Mobile menu closes on Escape key
- Active state clearly indicated with font-semibold and teal-600 color

**Test Updates:**

- Updated AppFooter test to expect py-8 instead of py-6
- All 194 tests passing

### Challenges & Solutions

**Challenge 1: Active Link Detection for Hash Links**

- Problem: Hash links like `/katalog#aplikasi` needed special handling for active state
- Solution: Implemented multi-condition isActiveLink function:
  - Exact match for home page (`/`)
  - Include check for hash links
  - StartsWith check for regular routes
- Location: components/common/AppHeader.vue:38-51

**Challenge 2: Mobile Menu Keyboard Accessibility**

- Problem: Mobile menu needed proper keyboard interaction (Escape to close)
- Solution: Added event listener management with watch and lifecycle hooks:
  - Watch mobileMenuOpen state
  - Add/remove keydown listener dynamically
  - Cleanup on component unmount
- Location: components/common/AppHeader.vue:61-72

**Challenge 3: Footer Padding Test Failure**

- Problem: Enhanced footer design increased padding from py-6 to py-8
- Solution: Updated test expectation to match new design
- Test was correctly failing (design intentional change)
- Location: tests/components/common/AppFooter.spec.ts:64-69

### Time Tracking

- **Story Created**: 2026-01-23
- **Implementation Start**: 2026-01-23
- **Implementation Complete**: 2026-01-24
- **Total Duration**: 1 day

## References

- [Nuxt Components Directory](https://nuxt.com/docs/guide/directory-structure/components)
- [Nuxt useRoute Composable](https://nuxt.com/docs/api/composables/use-route)
- [Nuxt Page Transitions](https://nuxt.com/docs/getting-started/transitions)
- [WAI-ARIA Navigation Patterns](https://www.w3.org/WAI/ARIA/apg/patterns/disclosure/)
- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [Heroicons Documentation](https://heroicons.com/)
